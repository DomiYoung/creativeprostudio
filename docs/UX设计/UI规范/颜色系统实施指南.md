# CreativePro Studio 颜色系统实施指南
**© 设计版权归domiyoung__所有**

## 目录
1. [概述](#概述)
2. [颜色系统架构](#颜色系统架构)
3. [在CSS中使用颜色系统](#在CSS中使用颜色系统)
4. [在React组件中使用颜色系统](#在React组件中使用颜色系统)
5. [在Tailwind中使用颜色系统](#在Tailwind中使用颜色系统)
6. [暗色模式实现](#暗色模式实现)
7. [最佳实践与注意事项](#最佳实践与注意事项)

## 概述

本指南提供了在CreativePro Studio项目中实施统一颜色系统的具体方法。基于颜色审计报告的发现，我们需要将原有的多种颜色定义整合为一个统一的颜色系统，以确保视觉一致性和开发效率。

## 颜色系统架构

新的颜色系统架构采用CSS变量作为基础，分为以下几个部分：

1. **主色系统** - 基于粉色系的品牌色彩
2. **辅助色彩系统** - 柔和的色彩集合
3. **语义色彩系统** - 传达特定信息的功能色
4. **灰度系统** - 结构和文本色彩
5. **界面颜色** - 用于UI元素的专用色彩
6. **暗色模式颜色** - 暗色主题下的专用色彩

## 在CSS中使用颜色系统

### 第一步：更新根CSS变量

在 `src/index.css` 中更新根CSS变量：

```css
:root {
  /* 主色系统 */
  --primary: #F5E1D9;
  --primary-rgb: 245, 225, 217;
  --primary-light: rgba(245, 225, 217, 0.2);
  --primary-dark: #E8D5C8;
  --secondary: #FFB5C5;
  --accent: #B6E5D8;
  
  /* 辅助色彩系统 */
  --blue: #94B6D2;
  --indigo: #A9A8D9;
  --purple: #C9A8D3;
  --pink: #E3A8B7;
  --red: #D98E8E;
  --orange: #E8C3A5;
  --yellow: #E8D5A5;
  --green: #A5C9BB;
  --mint: #A5C9C6;
  --teal: #A5C3C9;
  --cyan: #A8C9E3;
  
  /* 语义色彩系统 */
  --success: #A5C9BB;
  --warning: #E8D5A5;
  --error: #D98E8E;
  --info: #94B6D2;
  
  /* 灰度系统 */
  --gray: #968D87;
  --gray2: #B5ADA8;
  --gray3: #C7C0BD;
  --gray4: #D6D0CC;
  --gray5: #E6DED9;
  --gray6: #F5F0EC;
  
  /* 界面颜色 */
  --text-primary: #1D1D1F;
  --text-secondary: #86868B;
  --background: #F9FAFB;
  --background-card: #FFFFFF;
  --border: #E5E5E7;
  
  /* 暗色模式颜色 - 将在媒体查询中使用 */
  --dark-background: #1D1D1F;
  --dark-text-primary: #F9FAFB;
  --dark-text-secondary: #A1A1AA;
  --dark-border: #2D2D30;
  --dark-background-card: #2C2C2E;
}
```

### 第二步：删除其他CSS文件中的颜色定义

在 `DocumentPage.css` 和其他CSS文件中，删除重复的颜色定义，改为使用根变量。

### 第三步：在CSS文件中使用变量

```css
.button-primary {
  background-color: var(--primary);
  color: var(--text-primary);
}

.button-secondary {
  background-color: var(--secondary);
  color: var(--text-primary);
}

.alert-error {
  background-color: var(--error);
  color: white;
}
```

## 在React组件中使用颜色系统

### 更新tokens/colors.js

```javascript
// src/design-system/tokens/colors.js
const colors = {
  // 主色系统
  primary: {
    default: 'var(--primary)',
    light: 'var(--primary-light)',
    dark: 'var(--primary-dark)',
  },
  secondary: 'var(--secondary)',
  accent: 'var(--accent)',
  
  // 语义色
  semantic: {
    success: 'var(--success)',
    warning: 'var(--warning)',
    error: 'var(--error)',
    info: 'var(--info)',
  },
  
  // UI颜色
  ui: {
    background: 'var(--background)',
    card: 'var(--background-card)',
    text: {
      primary: 'var(--text-primary)',
      secondary: 'var(--text-secondary)',
    },
    border: 'var(--border)',
  },
  
  // 暗色模式
  dark: {
    background: 'var(--dark-background)',
    card: 'var(--dark-background-card)',
    text: {
      primary: 'var(--dark-text-primary)',
      secondary: 'var(--dark-text-secondary)',
    },
    border: 'var(--dark-border)',
  },
};

export default colors;
```

### 在Styled Components中使用

```jsx
import styled from 'styled-components';
import colors from '../design-system/tokens/colors';

const Button = styled.button`
  background-color: ${props => props.variant === 'primary' 
    ? colors.primary.default 
    : colors.secondary};
  color: ${colors.ui.text.primary};
  border: 1px solid ${colors.ui.border};
  
  &:hover {
    background-color: ${props => props.variant === 'primary' 
      ? colors.primary.dark 
      : 'rgba(255, 181, 197, 0.8)'};
  }
`;

export default Button;
```

### 更新Button.jsx组件

修改Button.jsx组件，使用颜色变量而非硬编码颜色：

```jsx
// 在Button.jsx中
case VARIANTS.PRIMARY:
  bgColor = props.$color || colors.primary.default; // 不再使用硬编码的 '#FF9190'
  textColor = colors.ui.text.primary;
  
  // ...其他样式
```

## 在Tailwind中使用颜色系统

更新`tailwind.config.js`，使用相同的颜色系统：

```javascript
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      colors: {
        'primary': 'var(--primary)',
        'primary-light': 'var(--primary-light)',
        'primary-dark': 'var(--primary-dark)',
        'secondary': 'var(--secondary)',
        'accent': 'var(--accent)',
        
        // 语义色
        'success': 'var(--success)',
        'warning': 'var(--warning)',
        'error': 'var(--error)',
        'info': 'var(--info)',
        
        // 灰度
        'gray': {
          DEFAULT: 'var(--gray)',
          '2': 'var(--gray2)',
          '3': 'var(--gray3)',
          '4': 'var(--gray4)',
          '5': 'var(--gray5)',
          '6': 'var(--gray6)',
        },
        
        // 界面颜色
        'text': {
          'primary': 'var(--text-primary)',
          'secondary': 'var(--text-secondary)',
        },
        'background': 'var(--background)',
        'card': 'var(--background-card)',
        'border': 'var(--border)',
      }
    }
  }
}
```

## 暗色模式实现

### 使用CSS媒体查询

```css
/* 在index.css中 */
@media (prefers-color-scheme: dark) {
  :root {
    --background: var(--dark-background);
    --background-card: var(--dark-background-card);
    --text-primary: var(--dark-text-primary);
    --text-secondary: var(--dark-text-secondary);
    --border: var(--dark-border);
  }
}
```

### 使用React Context实现手动切换

```jsx
// src/ThemeContext.jsx
import React, { createContext, useState, useEffect } from 'react';

export const ThemeContext = createContext();

export const ThemeProvider = ({ children }) => {
  const [isDark, setIsDark] = useState(false);
  
  useEffect(() => {
    // 检查系统偏好
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    setIsDark(prefersDark);
    
    // 监听系统偏好变化
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    const handler = (e) => setIsDark(e.matches);
    mediaQuery.addEventListener('change', handler);
    return () => mediaQuery.removeEventListener('change', handler);
  }, []);
  
  const toggleTheme = () => {
    setIsDark(!isDark);
    document.documentElement.classList.toggle('dark-mode', !isDark);
  };
  
  return (
    <ThemeContext.Provider value={{ isDark, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};
```

## 最佳实践与注意事项

1. **始终使用变量，避免硬编码**
   - 使用CSS变量或导入的颜色tokens，而非直接在代码中写入颜色值

2. **色彩语义化**
   - 使用语义明确的名称，如`primary`、`error`，而非`red`、`blue`等

3. **颜色函数**
   - 对于需要透明度变化的场景，使用rgba函数或CSS的opacity属性

4. **组件级覆盖**
   - 对于特殊组件，可以在组件作用域内覆盖颜色变量，但应保持谨慎

5. **颜色扩展**
   - 需要新增颜色时，先在颜色系统中定义，再在应用中使用

6. **测试不同主题**
   - 定期在亮色和暗色模式下测试所有UI元素，确保良好对比度

7. **辅助工具**
   - 使用Chrome开发者工具的"CSS Overview"功能定期检查颜色使用情况
   - 使用WAVE或Axe等工具检查颜色对比度是否符合无障碍标准

---

文档更新日期：2025-05-11  
© 设计版权归domiyoung__所有 