# 母版库 (Template Library) - UX 文档

## 页面概述

母版库是批量处理系统的核心设计资源中心，它集中存储、管理和分发可复用的设计模板。遵循 Apple Human Interface Guidelines，母版库提供了直观且结构化的界面，让用户能够高效地发现、使用和管理模板。作为批量处理系统的基石，母版库不仅包含预设模板，还支持用户创建自定义模板，并通过智能变量系统实现一次设计、批量输出的工作流。母版库与画布和素材库紧密集成，形成完整的设计-应用-生产链条，确保设计标准的一致性和效率的最大化。

## 信息架构

### 主要区域划分

- **顶部导航栏**：搜索、筛选与视图控制
- **左侧分类面板**：模板类别、收藏夹与最近使用
- **主内容区**：模板预览网格/列表
- **右侧详情面板**：选中模板的详情与操作
- **底部状态栏**：操作反馈与系统状态

### 模板组织结构

- **分类体系**：
  - 业务类型（产品、营销、内容等）
  - 输出格式（图片、视频、文档等）
  - 使用场景（电商、社交媒体、印刷等）
  - 设计风格（现代、简约、活泼等）

- **模板关系**：
  - 母版-变体关系（基础母版及其派生版本）
  - 组件依赖（模板内使用的可复用组件）
  - 素材关联（模板中引用的素材）
  - 版本历史（模板的迭代版本）

## UI 组件详解

### 1. 模板浏览网格

**设计原则**：
- 清晰展示模板预览与核心信息
- 支持多种视图模式适应不同浏览需求
- 提供丰富筛选与排序机制

**组件结构**：
```
.template-grid {
  ├── .grid-controls        // 网格控制
  │   ├── .view-mode        // 视图模式
  │   ├── .sort-options     // 排序选项
  │   └── .filter-controls  // 筛选控制
  ├── .grid-container       // 网格容器
  │   └── .template-card    // 模板卡片
  │       ├── .preview-area   // 预览区域
  │       │   ├── .preview-image  // 预览图像
  │       │   └── .preview-overlay // 预览覆盖层
  │       ├── .template-info  // 模板信息
  │       │   ├── .template-name  // 模板名称
  │       │   ├── .template-meta  // 模板元数据
  │       │   └── .template-tags  // 模板标签
  │       └── .card-actions   // 卡片操作
  │           ├── .quick-actions // 快速操作
  │           └── .menu-trigger  // 菜单触发器
  └── .grid-footer          // 网格底部
      ├── .pagination       // 分页控制
      └── .templates-count  // 模板计数
}
```

**视图模式**：
- 网格视图（默认，突出预览图）
- 列表视图（详细文本信息为主）
- 画廊视图（大图预览）
- 比较视图（并排对比多个模板）
- 分类视图（按类别分组展示）

### 2. 模板详情面板

**设计原则**：
- 全面展示模板的详细信息和用途
- 提供丰富的预览和测试功能
- 高效的应用和定制入口

**组件结构**：
```
.template-details {
  ├── .details-header       // 详情头部
  │   ├── .template-title   // 模板标题
  │   ├── .template-id      // 模板ID
  │   └── .header-actions   // 头部操作
  ├── .preview-section      // 预览部分
  │   ├── .preview-display  // 预览显示
  │   │   ├── .preview-window // 预览窗口
  │   │   └── .preview-controls // 预览控制
  │   └── .variations-strip // 变体条
  │       └── .variation-thumb // 变体缩略图
  ├── .info-section         // 信息部分
  │   ├── .description      // 描述
  │   ├── .specifications   // 规格
  │   │   ├── .dimensions     // 尺寸
  │   │   ├── .format-info    // 格式信息
  │   │   └── .compatibility  // 兼容性
  │   ├── .components-used  // 使用的组件
  │   └── .assets-linked    // 链接的素材
  ├── .variables-section    // 变量部分
  │   ├── .variables-list   // 变量列表
  │   │   └── .variable-item  // 变量项
  │   │       ├── .variable-name // 变量名称
  │   │       ├── .variable-type // 变量类型
  │   │       └── .variable-preview // 变量预览
  │   └── .variables-actions // 变量操作
  ├── .usage-section        // 使用部分
  │   ├── .usage-stats      // 使用统计
  │   └── .usage-examples   // 使用示例
  └── .actions-section      // 操作部分
      ├── .primary-actions  // 主要操作
      ├── .secondary-actions // 次要操作
      └── .related-templates // 相关模板
}
```

**功能特点**：
- 高质量可交互预览
- 多角度模板展示
- 变量编辑与实时预览
- 模板规格与使用指南
- 版本比较与历史访问
- 一键应用到批量项目

### 3. 模板创建与编辑

**设计原则**：
- 直观的模板构建流程
- 强大的变量定义系统
- 完善的测试与验证机制

**组件结构**：
```
.template-editor {
  ├── .editor-header        // 编辑器头部
  │   ├── .template-info    // 模板信息
  │   └── .editor-controls  // 编辑器控制
  ├── .editor-workspace     // 编辑工作区
  │   ├── .canvas-area      // 画布区域
  │   │   ├── .design-canvas  // 设计画布
  │   │   └── .canvas-tools   // 画布工具
  │   ├── .layers-panel     // 图层面板
  │   └── .components-panel // 组件面板
  ├── .variables-panel      // 变量面板
  │   ├── .variables-header // 变量头部
  │   │   ├── .panel-title    // 面板标题
  │   │   └── .panel-actions  // 面板操作
  │   ├── .variables-list   // 变量列表
  │   │   └── .variable-group // 变量组
  │   │       ├── .group-header // 组标题
  │   │       └── .variable-items // 变量项
  │   └── .variable-editor  // 变量编辑器
  │       ├── .variable-properties // 变量属性
  │       └── .variable-mapping    // 变量映射
  ├── .test-panel           // 测试面板
  │   ├── .test-data        // 测试数据
  │   ├── .test-preview     // 测试预览
  │   └── .test-results     // 测试结果
  └── .editor-footer        // 编辑器底部
      ├── .save-controls    // 保存控制
      ├── .validation-status // 验证状态
      └── .publish-controls // 发布控制
}
```

**创建流程特点**：
- 从现有设计创建模板
- 基于组件构建模板
- 可视化变量定义
- 动态属性映射
- 数据驱动测试
- 版本控制与备注

### 4. 变量系统界面

**设计原则**：
- 简化复杂变量的定义和管理
- 直观展示变量与设计元素的关系
- 灵活的数据映射与批量应用机制

**组件结构**：
```
.variables-system {
  ├── .variables-header     // 变量头部
  │   ├── .system-title     // 系统标题
  │   └── .system-actions   // 系统操作
  ├── .variables-catalog    // 变量目录
  │   ├── .variable-types   // 变量类型
  │   │   ├── .text-variables  // 文本变量
  │   │   ├── .image-variables // 图像变量
  │   │   ├── .color-variables // 颜色变量
  │   │   └── .data-variables  // 数据变量
  │   └── .custom-variables // 自定义变量
  ├── .mapping-interface    // 映射界面
  │   ├── .design-elements  // 设计元素
  │   ├── .data-sources     // 数据源
  │   └── .mapping-lines    // 映射线条
  ├── .preview-system       // 预览系统
  │   ├── .sample-data      // 样本数据
  │   ├── .preview-display  // 预览显示
  │   └── .variation-generator // 变体生成器
  └── .batch-controls       // 批量控制
      ├── .data-import      // 数据导入
      ├── .rules-editor     // 规则编辑器
      └── .output-settings  // 输出设置
}
```

**变量类型与功能**：
- 文本变量（内容、格式、样式）
- 图像变量（替换、裁剪、滤镜）
- 颜色变量（主题、品牌色、渐变）
- 布局变量（位置、大小、间距）
- 数据变量（数字、日期、逻辑）
- 组件变量（子模板、可复用UI）
- 条件变量（显示/隐藏、逻辑判断）

### 5. 模板分类与管理

**设计原则**：
- 清晰的分层分类系统
- 高效的模板组织与维护工具
- 完善的版本与审批流程

**组件结构**：
```
.template-management {
  ├── .categories-panel     // 分类面板
  │   ├── .categories-tree  // 分类树
  │   │   └── .category-item  // 分类项
  │   │       ├── .category-name // 分类名称
  │   │       └── .category-count // 分类计数
  │   └── .category-actions // 分类操作
  │       ├── .add-category   // 添加分类
  │       ├── .edit-category  // 编辑分类
  │       └── .category-settings // 分类设置
  ├── .collections-panel    // 收藏面板
  │   ├── .personal-collections // 个人收藏
  │   ├── .team-collections // 团队收藏
  │   └── .collection-actions // 收藏操作
  ├── .bulk-operations      // 批量操作
  │   ├── .templates-selection // 模板选择
  │   └── .operations-toolbar // 操作工具栏
  └── .workflow-controls    // 工作流控制
      ├── .approval-process // 审批流程
      ├── .version-control  // 版本控制
      └── .publish-settings // 发布设置
}
```

**管理功能特点**：
- 多级分类体系
- 标签与关键词体系
- 批量编辑与移动
- 使用情况分析
- 审批与发布工作流
- 权限与访问控制
- 存档与恢复机制

## 交互设计

### 主要交互流程

1. **模板发现流程**：
   - 浏览分类或使用搜索
   - 应用筛选条件精确结果
   - 预览模板缩略图
   - 查看详细信息和说明
   - 测试变量效果
   - 选择并应用模板

2. **模板创建流程**：
   - 选择创建方式（从头开始/从设计导入）
   - 构建设计布局和内容
   - 定义变量和可变区域
   - 测试变量效果和适应性
   - 添加描述和分类信息
   - 保存和发布模板

3. **模板应用流程**：
   - 选择适用模板
   - 配置变量值和选项
   - 预览生成结果
   - 批量应用到数据集
   - 查看应用进度和结果
   - 下载或进一步处理输出

4. **模板管理流程**：
   - 整理和分类模板
   - 更新和迭代模板版本
   - 管理模板权限和共享
   - 审核和批准模板变更
   - 分析模板使用情况
   - 归档过期或不常用模板

### 微交互细节

1. **模板预览交互**：
   - 卡片悬停展示快速操作
   - 预览图的自动循环展示变体
   - 缩略图到详细预览的平滑过渡
   - 预览窗口的缩放和平移控制
   - 实时变量调整的即时反馈
   - 多设备预览的切换动效

2. **变量编辑交互**：
   - 设计元素高亮显示可变区域
   - 变量关联元素的视觉连接线
   - 变量值调整的实时预览
   - 批量变量操作的进度反馈
   - 变量冲突和错误的及时提示
   - 变量组的折叠和展开动画

3. **批量应用交互**：
   - 数据源映射的拖放界面
   - 批处理进度的可视化展示
   - 样本预览的快速滚动浏览
   - 处理异常的实时通知
   - 输出结果的分类预览
   - 处理历史的时间轴展示

4. **版本与审批交互**：
   - 版本之间的视觉对比工具
   - 变更内容的高亮标记
   - 审批流程的状态跟踪
   - 反馈和修订的对话界面
   - 版本回滚的确认交互
   - 公开发布的庆祝动效

## 响应式设计

- **大屏工作站（>1920px）**：
  - 多列模板网格（6-8列）
  - 详情面板与预览并排显示
  - 扩展的变量编辑区域
  - 多视图同时展示功能
  - 高级工具持续可见

- **标准桌面（1366-1920px）**：
  - 适中模板网格（4-6列）
  - 平衡的工作区布局
  - 可折叠的辅助面板
  - 优化的工具栏布局
  - 编辑与预览的灵活切换

- **小屏桌面（1024-1366px）**：
  - 紧凑模板网格（3-4列）
  - 模态详情与编辑视图
  - 简化的控制面板
  - 焦点工具优先展示
  - 交互式指引更加突出

- **平板设备（768-1024px）**：
  - 双列模板网格布局
  - 全屏模板详情体验
  - 简化的变量编辑器
  - 触控优化的交互元素
  - 上下文工具动态显示

## 可访问性考虑

- **视觉可访问性**：
  - 高对比度界面模式
  - 可调整预览大小
  - 色盲友好的标签与状态
  - 清晰的文本与图标
  - 可自定义的显示密度

- **操作可访问性**：
  - 完整的键盘导航支持
  - 触控和鼠标操作优化
  - 简化的操作路径
  - 操作的多种触发方式
  - 减少精细运动需求

- **认知可访问性**：
  - 一致的界面模式
  - 分步引导与教程
  - 简化复杂流程的视觉引导
  - 清晰的错误与成功反馈
  - 上下文相关的帮助提示

## 与批量处理系统的集成

### 母版到批量的桥接

- **模板应用机制**：
  - 一键创建批量任务
  - 智能变量映射建议
  - 数据源连接器
  - 批量预览与验证
  - 处理设置预配置

- **结果处理流程**：
  - 输出管理与组织
  - 质量检查和审核
  - 异常处理和修正
  - 结果分发与应用
  - 处理记录与分析

### 与其他模块的联动

- **素材库集成**：
  - 从模板访问素材库
  - 素材替换变量定义
  - 智能素材推荐
  - 素材更新同步到模板
  - 素材使用追踪

- **画布集成**：
  - 模板到画布的编辑过渡
  - 画布设计保存为模板
  - 共享设计元素和样式
  - 跨模块拖放支持
  - 设计系统一致性

## 性能与技术考量

### 性能优化

- **模板渲染优化**：
  - 渐进式加载大型模板
  - 视图外元素的延迟处理
  - 复杂变量的缓存计算
  - 预生成常用变体
  - GPU加速的动态预览

- **批量处理优化**：
  - 任务队列和优先级管理
  - 并行处理大量变体
  - 增量处理大型数据集
  - 智能资源分配
  - 处理中间结果缓存

### 技术实现策略

- **变量系统架构**：
  - 声明式变量定义
  - 响应式数据绑定
  - 分层变量解析引擎
  - 高效变量求值
  - 变量依赖跟踪

- **模板存储与版本控制**：
  - 模块化模板结构
  - 差分存储版本变更
  - 设计资产的高效索引
  - 分布式缓存策略
  - 安全备份与恢复机制

## 用户体验流程图

```
进入母版库
 │
 ├─→ 模板浏览 ───→ 筛选分类 ───→ 预览模板 ───→ 检查详情 ───→ 应用模板
 │   │                                                     └─→ 收藏模板
 │   └─→ 搜索模板 ───→ 比较选项 ───→ 测试变量 ───→ 选择适用 ───→ 配置应用
 │
 ├─→ 模板创建 ───→ 设计布局 ───→ 定义变量 ───→ 测试效果 ───→ 保存发布
 │   │                                                   └─→ 请求审批
 │   └─→ 从设计创建 ───→ 标记变量 ───→ 设置规则 ───→ 验证模板 ───→ 分类保存
 │
 ├─→ 模板应用 ───→ 选择模板 ───→ 配置变量 ───→ 连接数据 ───→ 批量生成
 │   │                                                  └─→ 调整输出
 │   └─→ 快速应用 ───→ 使用预设 ───→ 预览结果 ───→ 执行任务 ───→ 查看结果
 │
 └─→ 模板管理 ───→ 查看模板 ───→ 整理分类 ───→ 更新版本 ───→ 分析使用
     │                                                  └─→ 设置权限
     └─→ 批量操作 ───→ 选择多个 ───→ 执行操作 ───→ 审核变更 ───→ 发布应用
```

## 设计决策说明

1. **模板为中心的工作流**：
   - 强调模板复用性和可扩展性
   - 模板预览优先于复杂控制面板
   - 将复杂功能隐藏在简明界面之后
   - 渐进式复杂度适应不同用户需求

2. **变量系统的可视化表达**：
   - 抽象复杂变量关系为直观视觉连接
   - 实时预览减少认知负担
   - 自然语言表述技术概念
   - 模拟最终使用场景的真实预览

3. **批量与个性的平衡**：
   - 标准化与定制化的灵活切换
   - 预设与高级选项并重
   - 批量效率和质量控制兼顾
   - 异常处理流程的人性化设计

4. **版本与协作策略**：
   - 清晰的变更历史与回溯机制
   - 协作编辑的权限与责任划分
   - 审批流程的透明度与效率
   - 模板演化与稳定性的平衡

5. **系统集成与扩展性**：
   - 模块间数据流的一致性
   - 插件架构支持功能扩展
   - API设计促进系统集成
   - 未来技术演进的适应性考量 