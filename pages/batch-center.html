<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CreativePro Studio - 批量处理中心</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        :root {
            /* 调色板：基于Apple Design发布的基础色调 */
            --dopamine-orange: #FF9500;
            --dopamine-orange-light: #FFB340;
            --dopamine-orange-dark: #CC7600;
            
            --dopamine-pink: #FF2D55;
            --dopamine-mint: #00C7BE;
            --dopamine-blue: #007AFF;
            --dopamine-purple: #5856D6;
            --dopamine-yellow: #FFCC00;
            
            --gray-50: #F9FAFB;
            --gray-100: #F2F4F7;
            --gray-200: #E4E7EC;
            --gray-300: #D0D5DD;
            --gray-400: #98A2B3;
            --gray-500: #667085;
            --gray-600: #475467;
            --gray-700: #344054;
            --gray-800: #1D2939;
            --gray-900: #101828;
            
            /* SF Pro 字体 */
            --font-sf: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'SF Pro Display', 'Helvetica Neue', sans-serif;
            
            /* 交互效果 */
            --transition-base: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: all 0.4s cubic-bezier(0.18, 0.89, 0.32, 1.28);
            
            /* 阴影 */
            --shadow-sm: 0 1px 2px rgba(16, 24, 40, 0.05);
            --shadow-md: 0 2px 4px rgba(16, 24, 40, 0.06);
            --shadow-lg: 0 4px 8px rgba(16, 24, 40, 0.08);
            --shadow-xl: 0 8px 16px rgba(16, 24, 40, 0.1);
            --shadow-inset: inset 0 1px 2px rgba(16, 24, 40, 0.06);
            
            /* 圆角 */
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 10px;
            --radius-xl: 12px;
        }
        
        /* 重置样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-sf);
        }

        body {
            background-color: var(--gray-100);
            color: var(--gray-900);
            line-height: 1.5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        h1, h2, h3, h4, h5 {
            font-weight: 600;
        }

        /* 按钮样式 */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 16px;
            border-radius: var(--radius-md);
            font-weight: 500;
            font-size: 14px;
            transition: var(--transition-bounce);
            border: none;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.4);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%, -50%);
            transform-origin: 50% 50%;
        }

        .btn:active::after {
            animation: ripple 0.6s ease-out;
        }

        .btn-primary {
            background-color: var(--dopamine-orange);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--dopamine-orange-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-primary:active {
            transform: translateY(0);
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary {
            background-color: white;
            color: var(--gray-700);
            border: 1px solid var(--gray-300);
        }

        .btn-secondary:hover {
            background-color: var(--gray-50);
            border-color: var(--gray-400);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .btn-secondary:active {
            transform: translateY(0);
            background-color: var(--gray-100);
        }

        .btn-ghost {
            background-color: transparent;
            color: var(--gray-600);
            padding: 8px 12px;
        }

        .btn-ghost:hover {
            background-color: var(--gray-100);
            color: var(--gray-800);
        }

        .btn i {
            margin-right: 8px;
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            padding: 0;
            border-radius: 50%;
        }

        .btn-icon i {
            margin: 0;
        }

        .btn[disabled] {
            opacity: 0.65;
            cursor: not-allowed;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(100, 100);
                opacity: 0;
            }
        }

        /* 项目卡片 */
        .project-card {
            background-color: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            padding: 20px;
            margin-bottom: 20px;
            transition: var(--transition-smooth);
            border: 1px solid var(--gray-200);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(20px);
        }

        .project-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
            border-color: var(--gray-300);
        }

        .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background-color: var(--gray-300);
            opacity: 0;
            transition: var(--transition-base);
        }

        .project-card:hover::before {
            opacity: 1;
        }

        .project-card.completed::before {
            background-color: #18A957;
        }

        .project-card.processing::before {
            background-color: var(--dopamine-orange);
        }

        .project-card.pending::before {
            background-color: var(--gray-400);
        }

        .project-card .status-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            transition: var(--transition-bounce);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .status-badge.completed {
            background-color: #E3FFF1;
            color: #18A957;
        }

        .status-badge.processing {
            background-color: #FFF7E3;
            color: #B25000;
        }

        .status-badge.processing::before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #B25000;
            animation: pulse 1.5s infinite;
        }

        .status-badge.pending {
            background-color: #F2F4F7;
            color: var(--gray-600);
        }

        @keyframes pulse {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(0.85);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .project-card h3 {
            margin-bottom: 12px;
            font-size: 18px;
            color: var(--gray-900);
        }

        .project-card .meta {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
            color: var(--gray-600);
            font-size: 14px;
        }

        .project-card .meta .dot {
            margin: 0 8px;
            display: inline-block;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background-color: var(--gray-400);
        }

        .project-card .stats {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }

        .project-card .stat-item {
            flex: 1;
        }

        .project-card .stat-value {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--gray-900);
        }

        .project-card .stat-label {
            font-size: 13px;
            color: var(--gray-600);
        }

        .project-card .progress-bar {
            height: 8px;
            background-color: var(--gray-200);
            border-radius: 4px;
            margin-bottom: 16px;
            overflow: hidden;
            position: relative;
        }

        .project-card .progress-fill {
            height: 100%;
            background-color: var(--dopamine-orange);
            border-radius: 4px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .project-card .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                        transparent, 
                        rgba(255, 255, 255, 0.3),
                        transparent);
            animation: shimmer 1.5s infinite;
            display: none;
        }

        .project-card.processing .progress-fill::after {
            display: block;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }

        .project-card .actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* 批量操作卡片 */
        .batch-action-card {
            background-color: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: 30px;
            border: 1px solid var(--gray-200);
            transition: var(--transition-bounce);
            overflow: hidden;
            opacity: 0;
            transform: translateY(-20px);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .batch-action-card .card-header {
            padding: 20px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .batch-action-card .card-header h3 {
            margin: 0;
            font-weight: 600;
            font-size: 18px;
            display: flex;
            align-items: center;
        }

        .batch-action-card .card-header h3 i {
            margin-right: 12px;
            font-size: 22px;
            color: var(--dopamine-orange);
        }

        .batch-action-card .card-body {
            padding: 20px;
        }

        .batch-action-card .action-type {
            display: flex;
            align-items: center;
            padding: 16px;
            border-radius: var(--radius-md);
            border: 1px solid var(--gray-200);
            margin-bottom: 16px;
            transition: var(--transition-smooth);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .batch-action-card .action-type:hover {
            border-color: var(--dopamine-orange);
            background-color: #FFF8F1;
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .batch-action-card .action-type.selected {
            border-color: var(--dopamine-orange);
            background-color: #FFF8F1;
            transform: scale(1.02);
            box-shadow: var(--shadow-md);
        }

        .batch-action-card .action-type.selected::after {
            content: '\f00c';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            top: 8px;
            right: 8px;
            color: var(--dopamine-orange);
            background-color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            border: 1px solid var(--dopamine-orange-light);
            animation: scaleIn 0.2s ease-out;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .batch-action-card .action-type-icon {
            width: 40px;
            height: 40px;
            background-color: var(--gray-100);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            font-size: 18px;
            color: var(--gray-700);
        }

        .batch-action-card .action-type.selected .action-type-icon {
            background-color: var(--dopamine-orange-light);
            color: var(--dopamine-orange-dark);
        }

        .batch-action-card .action-type-content {
            flex: 1;
        }

        .batch-action-card .action-type-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--gray-800);
        }

        .batch-action-card .action-type-description {
            font-size: 14px;
            color: var(--gray-600);
        }

        .batch-action-card .card-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* 部分和标题 */
        .section-header {
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--gray-900);
        }

        .section-actions {
            display: flex;
            gap: 12px;
        }

        /* 过滤器 */
        .filters {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            padding: 4px;
            background-color: white;
            border-radius: 24px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            width: fit-content;
        }

        .filter-track {
            position: absolute;
            top: 4px;
            left: 4px;
            height: calc(100% - 8px);
            background-color: var(--dopamine-orange-light);
            border-radius: 20px;
            transition: var(--transition-bounce);
            z-index: 0;
        }

        .filter-item {
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            background-color: transparent;
            color: var(--gray-600);
            cursor: pointer;
            transition: var(--transition-bounce);
            position: relative;
            z-index: 1;
            border: none;
        }

        .filter-item:hover {
            color: var(--gray-900);
        }

        .filter-item.active {
            color: var(--gray-900);
            font-weight: 500;
        }

        .filters::before {
            content: '';
            position: absolute;
            background-color: var(--dopamine-orange-light);
            border-radius: 20px;
            transition: var(--transition-bounce);
            z-index: 0;
            top: 4px;
            height: calc(100% - 8px);
        }

        /* 项目网格 */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 24px;
        }

        /* 加载更多按钮 */
        .load-more {
            text-align: center;
            margin-top: 32px;
        }

        /* 导入项目表单 */
        .import-form {
            background-color: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            box-shadow: var(--shadow-lg);
            margin-bottom: 32px;
            border: 1px solid var(--gray-200);
            animation: fadeIn 0.3s ease-out;
            opacity: 0;
            transform: scale(0.95);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .import-form .form-header {
            margin-bottom: 20px;
        }

        .import-form .form-header h3 {
            font-size: 20px;
            margin-bottom: 8px;
        }

        .import-form .form-header p {
            color: var(--gray-600);
            font-size: 14px;
        }

        .import-form .form-group {
            margin-bottom: 20px;
        }

        .import-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--gray-700);
        }

        .import-form input[type="file"] {
            width: 100%;
            padding: 20px;
            border: 2px dashed var(--gray-300);
            border-radius: var(--radius-md);
            background-color: var(--gray-50);
            color: var(--gray-600);
            transition: var(--transition-base);
            text-align: center;
            cursor: pointer;
        }

        .import-form input[type="file"]:hover {
            border-color: var(--dopamine-orange-light);
            background-color: #FFF8F1;
        }

        .import-form input[type="file"]::file-selector-button {
            background-color: var(--dopamine-orange);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            padding: 8px 16px;
            margin-right: 16px;
            cursor: pointer;
            transition: var(--transition-base);
        }

        .import-form input[type="file"]::file-selector-button:hover {
            background-color: var(--dopamine-orange-dark);
        }

        .import-form .form-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* 空状态 */
        .empty-state {
            text-align: center;
            padding: 80px 0;
            background-color: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            margin-bottom: 24px;
            border: 1px dashed var(--gray-300);
            transition: var(--transition-base);
        }

        .empty-state:hover {
            border-color: var(--dopamine-orange-light);
            box-shadow: var(--shadow-md);
        }

        .empty-state .icon {
            font-size: 64px;
            color: var(--gray-300);
            margin-bottom: 24px;
            transition: var(--transition-base);
        }

        .empty-state:hover .icon {
            color: var(--dopamine-orange);
            transform: scale(1.1);
        }

        .empty-state h3 {
            font-size: 24px;
            margin-bottom: 12px;
            color: var(--gray-800);
        }

        .empty-state p {
            color: var(--gray-600);
            max-width: 400px;
            margin: 0 auto 24px;
        }

        /* 响应式调整 */
        @media (max-width: 768px) {
            .projects-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 文件上传预览 */
        .file-preview {
            display: flex;
            align-items: center;
            padding: 12px;
            background-color: var(--gray-50);
            border-radius: var(--radius-md);
            margin-top: 12px;
            border: 1px solid var(--gray-200);
            animation: slideUp 0.3s ease-out;
        }

        .file-icon {
            width: 40px;
            height: 40px;
            background-color: white;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dopamine-orange);
            margin-right: 12px;
            font-size: 20px;
            border: 1px solid var(--gray-200);
        }

        .file-name {
            flex: 1;
            font-weight: 500;
            color: var(--gray-800);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-size {
            color: var(--gray-500);
            font-size: 12px;
            margin-left: 12px;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 卡片过渡效果 */
        .project-card.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        /* 批量操作卡片激活状态 */
        .batch-action-card.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* 导入表单激活状态 */
        .import-form.active {
            opacity: 1;
            transform: scale(1);
        }

        /* 按钮脉冲动画 */
        .pulse-animation {
            animation: pulse-button 1s ease-out;
        }

        @keyframes pulse-button {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 149, 0, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(255, 149, 0, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 149, 0, 0);
            }
        }

        /* 项目选择样式 */
        .project-selection-checkbox {
            position: absolute;
            top: 16px;
            left: 16px;
            width: 20px;
            height: 20px;
            accent-color: var(--dopamine-orange);
            cursor: pointer;
            transform: scale(1.2);
            z-index: 2;
        }

        /* 导出工具栏 */
        .export-toolbar {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            margin-bottom: 20px;
            background-color: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            opacity: 0;
            transform: translateY(-10px);
            transition: var(--transition-smooth);
            pointer-events: none;
        }

        .export-toolbar.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .export-toolbar-text {
            margin-right: auto;
            font-size: 14px;
            color: var(--gray-700);
        }

        .export-count {
            font-weight: 600;
            color: var(--dopamine-orange);
        }

        /* 导出成功通知 */
        .export-notification {
            position: fixed;
            bottom: 24px;
            right: 24px;
            padding: 16px;
            border-radius: var(--radius-lg);
            background-color: var(--gray-800);
            color: white;
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition-bounce);
            z-index: 1000;
        }

        .export-notification.active {
            transform: translateY(0);
            opacity: 1;
        }

        .export-notification-icon {
            font-size: 24px;
            color: var(--dopamine-orange);
        }

        .export-notification-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .export-notification-desc {
            font-size: 13px;
            color: var(--gray-300);
        }

        /* 项目版本管理样式 */
        .version-history-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition-smooth);
        }

        .version-history-modal.active {
            opacity: 1;
            pointer-events: auto;
        }

        .version-modal-content {
            width: 800px;
            max-width: 90%;
            max-height: 85vh;
            background-color: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            display: flex;
            flex-direction: column;
            transform: scale(0.95);
            transition: var(--transition-bounce);
        }

        .version-history-modal.active .version-modal-content {
            transform: scale(1);
        }

        .version-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid var(--gray-200);
        }

        .version-modal-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .version-modal-title i {
            color: var(--dopamine-blue);
        }

        .version-modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: transparent;
            color: var(--gray-500);
            border: none;
            cursor: pointer;
            transition: var(--transition-base);
        }

        .version-modal-close:hover {
            background-color: var(--gray-100);
            color: var(--gray-800);
        }

        .version-modal-body {
            padding: 20px;
            overflow-y: auto;
        }

        .version-list {
            display: flex;
            flex-direction: column;
        }

        .version-timeline {
            position: relative;
            padding-left: 28px;
        }

        .version-timeline::before {
            content: '';
            position: absolute;
            top: 0;
            left: 10px;
            height: 100%;
            width: 2px;
            background-color: var(--gray-200);
        }

        .version-item {
            position: relative;
            margin-bottom: 24px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--gray-100);
        }

        .version-item:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }

        .version-item-dot {
            position: absolute;
            left: -28px;
            top: 0;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--gray-100);
            border: 2px solid var(--gray-300);
            z-index: 1;
        }

        .version-item.current .version-item-dot {
            background-color: var(--dopamine-blue);
            border-color: var(--dopamine-blue-light);
        }

        .version-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .version-item-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
            color: var(--gray-800);
        }

        .version-item-time {
            font-size: 13px;
            color: var(--gray-500);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .version-item-actions {
            display: flex;
            gap: 8px;
        }

        .version-compare-btn, .version-restore-btn {
            padding: 6px 12px;
            border-radius: var(--radius-md);
            font-size: 13px;
            cursor: pointer;
            transition: var(--transition-base);
            background-color: white;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .version-compare-btn {
            color: var(--dopamine-blue);
            border: 1px solid var(--dopamine-blue-light);
        }

        .version-compare-btn:hover {
            background-color: var(--dopamine-blue-light);
        }

        .version-restore-btn {
            color: var(--gray-600);
            border: 1px solid var(--gray-300);
        }

        .version-restore-btn:hover {
            background-color: var(--gray-100);
            color: var(--gray-800);
        }

        .version-item-details {
            background-color: var(--gray-50);
            border-radius: var(--radius-md);
            padding: 12px 16px;
        }

        .version-detail-row {
            display: flex;
            margin-bottom: 8px;
        }

        .version-detail-label {
            width: 120px;
            font-size: 13px;
            color: var(--gray-600);
        }

        .version-detail-value {
            flex: 1;
            font-size: 13px;
            color: var(--gray-800);
        }

        .version-compare-view {
            display: none;
            margin-top: 16px;
        }

        .version-compare-view.active {
            display: block;
        }

        .version-compare-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .version-compare-table th,
        .version-compare-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
            font-size: 13px;
        }

        .version-compare-table th {
            background-color: var(--gray-100);
            font-weight: 600;
            color: var(--gray-700);
        }

        .version-compare-table tr:last-child td {
            border-bottom: none;
        }

        .version-added {
            color: #18A957;
            background-color: rgba(24, 169, 87, 0.1);
        }

        .version-removed {
            color: #FF3B30;
            background-color: rgba(255, 59, 48, 0.1);
        }

        .version-changed {
            color: var(--dopamine-orange);
            background-color: rgba(255, 149, 0, 0.1);
        }

        .version-modal-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* 当前版本标签 */
        .version-current-tag {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            background-color: var(--dopamine-blue-light);
            color: var(--dopamine-blue);
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 8px;
        }

        /* 版本状态徽章 */
        .version-status {
            display: inline-flex;
            align-items: center;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 8px;
        }

        .version-status.exported {
            background-color: rgba(24, 169, 87, 0.1);
            color: #18A957;
        }

        .version-status.modified {
            background-color: rgba(255, 149, 0, 0.1);
            color: var(--dopamine-orange);
        }

        .version-status.created {
            background-color: rgba(0, 122, 255, 0.1);
            color: var(--dopamine-blue);
        }

        /* 审核管理功能 */
        .review-section {
            margin-top: 40px;
            margin-bottom: 40px;
        }
        
        .review-card {
            background-color: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            margin-bottom: 20px;
            border: 1px solid var(--gray-200);
            transition: var(--transition-bounce);
            overflow: hidden;
        }
        
        .review-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .review-card .card-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #F9FAFB;
        }
        
        .review-card .card-header h3 {
            margin: 0;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            color: var(--gray-800);
        }
        
        .review-card .review-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .review-status-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .review-status-badge.pending {
            background-color: #FFF7E3;
            color: #B25000;
        }
        
        .review-status-badge.approved {
            background-color: #E3FFF1;
            color: #18A957;
        }
        
        .review-status-badge.rejected {
            background-color: #FFE9E9;
            color: #D92D20;
        }
        
        .review-card .card-body {
            padding: 20px;
        }
        
        .review-info {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
            margin-bottom: 20px;
        }
        
        .review-info-item {
            min-width: 180px;
        }
        
        .review-info-label {
            font-size: 13px;
            color: var(--gray-600);
            margin-bottom: 4px;
        }
        
        .review-info-value {
            font-weight: 500;
            color: var(--gray-900);
        }
        
        .review-content {
            margin-bottom: 20px;
            padding: 16px;
            background-color: var(--gray-50);
            border-radius: var(--radius-md);
            border: 1px solid var(--gray-200);
        }
        
        .review-content-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--gray-800);
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .review-content-title i {
            color: var(--dopamine-orange);
        }
        
        .review-summary {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .review-detail-item {
            flex: 1;
            min-width: 200px;
        }
        
        .review-comments {
            background-color: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-md);
            margin-top: 16px;
        }
        
        .review-comment {
            padding: 12px 16px;
            border-bottom: 1px solid var(--gray-200);
        }
        
        .review-comment:last-child {
            border-bottom: none;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .comment-author {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .author-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--gray-700);
        }
        
        .author-info {
            display: flex;
            flex-direction: column;
        }
        
        .author-name {
            font-weight: 500;
            font-size: 14px;
            color: var(--gray-900);
        }
        
        .comment-date {
            font-size: 12px;
            color: var(--gray-500);
        }
        
        .comment-content {
            font-size: 14px;
            color: var(--gray-800);
            margin-bottom: 0;
        }
        
        .review-card .card-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        .feishu-status {
            display: flex;
            align-items: center;
            margin-top: 12px;
            padding: 8px 12px;
            background-color: #F2F8FF;
            border-radius: var(--radius-md);
            border: 1px solid #D1E5FE;
            font-size: 13px;
            color: #0E5FD9;
            gap: 8px;
        }
        
        .feishu-status i {
            font-size: 16px;
        }
        
        .add-comment-form {
            margin-top: 16px;
        }
        
        .add-comment-form textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-md);
            resize: vertical;
            min-height: 80px;
            margin-bottom: 12px;
            font-family: inherit;
            font-size: 14px;
        }
        
        .add-comment-form textarea:focus {
            outline: none;
            border-color: var(--dopamine-orange);
            box-shadow: 0 0 0 3px rgba(var(--dopamine-orange-rgb), 0.1);
        }
    </style>
    <script src="navigation.js"></script>
</head>
<body>
    <!-- 导航栏由navigation.js自动添加 -->
    <div class="container">
        <div class="section-header">
            <h1 class="section-title">批量处理中心</h1>
            <div class="section-actions">
                <button class="btn btn-secondary" id="importBtn">
                    <i class="fas fa-file-import"></i> 导入项目
                </button>
                <button class="btn btn-primary" id="newBatchBtn">
                    <i class="fas fa-plus"></i> 新建批量项目
                </button>
            </div>
        </div>

        <!-- 添加导出工具栏 -->
        <div class="export-toolbar" id="exportToolbar">
            <span class="export-toolbar-text">已选择 <span class="export-count" id="selectedCount">0</span> 个项目</span>
            <button class="btn btn-secondary" id="cancelSelection">取消</button>
            <button class="btn btn-primary" id="exportSelected">
                <i class="fas fa-file-export"></i> 导出选中项目
            </button>
        </div>
        
        <!-- 导出成功通知 -->
        <div class="export-notification" id="exportNotification">
            <div class="export-notification-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div>
                <div class="export-notification-title">项目已准备导出</div>
                <div class="export-notification-desc">正在跳转到导出页面...</div>
            </div>
        </div>

        <!-- 导入项目表单，默认隐藏 -->
        <div class="import-form" style="display: none;" id="importForm">
            <div class="form-header">
                <h3>导入现有项目</h3>
                <p>上传您的项目配置文件，快速创建批量处理任务</p>
            </div>
            <div class="form-group">
                <label for="projectFile">项目配置文件</label>
                <input type="file" id="projectFile" accept=".json,.csv">
            </div>
            <div class="form-footer">
                <button class="btn btn-secondary" id="cancelImport">取消</button>
                <button class="btn btn-primary" id="confirmImport">导入</button>
            </div>
        </div>

        <!-- 批量操作卡片，点击新建批量项目时显示 -->
        <div class="batch-action-card" style="display: none;" id="batchActionCard">
            <div class="card-header">
                <h3><i class="fas fa-magic"></i> 选择批量操作类型</h3>
                <button class="btn btn-icon btn-ghost" id="closeActionCard">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="card-body">
                <div class="action-type" data-type="image-update">
                    <div class="action-type-icon">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="action-type-content">
                        <div class="action-type-title">批量更新产品图片</div>
                        <div class="action-type-description">一键替换多个产品的主图、详情图或SKU图片</div>
                    </div>
                </div>
                
                <div class="action-type" data-type="price-adjustment">
                    <div class="action-type-icon">
                        <i class="fas fa-tag"></i>
                    </div>
                    <div class="action-type-content">
                        <div class="action-type-title">批量调整价格</div>
                        <div class="action-type-description">按比例或固定值调整产品价格，支持多种价格类型</div>
                    </div>
                </div>
                
                <div class="action-type" data-type="inventory-update">
                    <div class="action-type-icon">
                        <i class="fas fa-boxes"></i>
                    </div>
                    <div class="action-type-content">
                        <div class="action-type-title">批量更新库存</div>
                        <div class="action-type-description">批量更新产品库存数量，设置库存警戒线</div>
                    </div>
                </div>
                
                <div class="action-type" data-type="attribute-edit">
                    <div class="action-type-icon">
                        <i class="fas fa-list"></i>
                    </div>
                    <div class="action-type-content">
                        <div class="action-type-title">批量编辑属性</div>
                        <div class="action-type-description">批量修改产品属性，包括标题、描述、分类等</div>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <button class="btn btn-secondary" id="cancelAction">取消</button>
                <button class="btn btn-primary" id="confirmAction" disabled>下一步</button>
            </div>
        </div>

        <!-- 过滤器 -->
        <div class="filters">
            <div class="filter-track"></div>
            <div class="filter-item active" data-filter="all">全部项目</div>
            <div class="filter-item" data-filter="processing">进行中</div>
            <div class="filter-item" data-filter="completed">已完成</div>
            <div class="filter-item" data-filter="pending">待处理</div>
        </div>

        <!-- 项目列表 -->
        <div id="projectGrid" class="project-grid">
            <!-- 项目卡片示例 -->
            <div class="project-card completed" data-project-id="1" data-project-name="产品图像更新批量项目" data-images-count="42">
                <input type="checkbox" class="project-selection-checkbox" aria-label="选择项目">
                <span class="status-badge" style="background-color: rgba(24, 169, 87, 0.1); color: #18A957;">
                    <i class="fas fa-check-circle"></i> 已完成
                </span>
                <h3>产品图像更新批量项目</h3>
                <div class="project-meta">
                    <span><i class="far fa-images"></i> 42张图片</span>
                    <span><i class="far fa-clock"></i> 2023-06-15</span>
                </div>
                <div class="project-stats">
                    <div class="stat">
                        <span class="stat-value">100%</span>
                        <span class="stat-label">完成率</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">185s</span>
                        <span class="stat-label">处理时间</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">4.2MB</span>
                        <span class="stat-label">平均大小</span>
                    </div>
                </div>
                <div class="project-actions">
                    <button class="btn btn-secondary btn-sm show-versions-btn" data-project-id="1">
                        <i class="fas fa-history"></i> 版本历史
                    </button>
                    <button class="btn btn-secondary btn-sm"><i class="fas fa-eye"></i> 查看</button>
                    <button class="btn btn-primary btn-sm"><i class="fas fa-sync-alt"></i> 重新处理</button>
                </div>
            </div>
            
            <div class="project-card processing" data-project-id="2" data-project-name="夏季促销活动设计" data-images-count="18">
                <input type="checkbox" class="project-selection-checkbox" aria-label="选择项目">
                <span class="status-badge" style="background-color: rgba(255, 149, 0, 0.1); color: var(--dopamine-orange);">
                    <i class="fas fa-cog fa-spin"></i> 处理中
                </span>
                <h3>夏季促销活动设计</h3>
                <div class="project-meta">
                    <span><i class="far fa-images"></i> 18张图片</span>
                    <span><i class="far fa-clock"></i> 2023-06-14</span>
                </div>
                <div class="project-stats">
                    <div class="stat">
                        <span class="stat-value">67%</span>
                        <span class="stat-label">完成率</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">--</span>
                        <span class="stat-label">处理时间</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">3.8MB</span>
                        <span class="stat-label">平均大小</span>
                    </div>
                </div>
                <div class="project-actions">
                    <button class="btn btn-secondary btn-sm"><i class="fas fa-eye"></i> 查看</button>
                    <button class="btn btn-primary btn-sm" disabled><i class="fas fa-pause"></i> 暂停</button>
                </div>
            </div>
            
            <div class="project-card pending" data-project-id="3" data-project-name="新品展示图库" data-images-count="35">
                <input type="checkbox" class="project-selection-checkbox" aria-label="选择项目">
                <span class="status-badge" style="background-color: rgba(152, 162, 179, 0.1); color: var(--gray-500);">
                    <i class="fas fa-clock"></i> 待处理
                </span>
                <h3>新品展示图库</h3>
                <div class="project-meta">
                    <span><i class="far fa-images"></i> 35张图片</span>
                    <span><i class="far fa-clock"></i> 2023-06-13</span>
                </div>
                <div class="project-stats">
                    <div class="stat">
                        <span class="stat-value">0%</span>
                        <span class="stat-label">完成率</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">--</span>
                        <span class="stat-label">处理时间</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value">--</span>
                        <span class="stat-label">平均大小</span>
                    </div>
                </div>
                <div class="project-actions">
                    <button class="btn btn-secondary btn-sm"><i class="fas fa-eye"></i> 查看</button>
                    <button class="btn btn-primary btn-sm"><i class="fas fa-play"></i> 开始处理</button>
                </div>
            </div>
        </div>

        <!-- 加载更多 -->
        <div class="load-more">
            <button class="btn btn-secondary">加载更多项目</button>
        </div>
    </div>

    <!-- 版本历史模态窗口 -->
    <div class="version-history-modal" id="versionHistoryModal">
        <div class="version-modal-content">
            <div class="version-modal-header">
                <div class="version-modal-title">
                    <i class="fas fa-history"></i> 版本历史
                    <span id="versionProjectName">产品图像更新批量项目</span>
                </div>
                <button class="version-modal-close" id="closeVersionModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="version-modal-body">
                <div class="version-list">
                    <div class="version-timeline" id="versionTimeline">
                        <!-- 版本项将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>
            <div class="version-modal-footer">
                <button class="btn btn-secondary" id="closeVersionModalBtn">关闭</button>
            </div>
        </div>
    </div>

    <!-- 审核管理部分 -->
    <div class="review-section">
        <div class="section-header">
            <h2 class="section-title">审核管理</h2>
            <div class="section-actions">
                <button class="btn btn-secondary" id="sync-feishu">
                    <i class="fas fa-sync-alt"></i> 同步飞书审核
                </button>
                <button class="btn btn-primary" id="create-review">
                    <i class="fas fa-plus"></i> 创建审核
                </button>
            </div>
        </div>
        
        <div class="filters">
            <button class="filter-item active" data-filter="all">全部</button>
            <button class="filter-item" data-filter="pending">待审核</button>
            <button class="filter-item" data-filter="approved">已通过</button>
            <button class="filter-item" data-filter="rejected">已驳回</button>
        </div>
        
        <div class="review-list">
            <!-- 审核卡片示例 -->
            <div class="review-card">
                <div class="card-header">
                    <h3>更新产品图片 #PR-2023120001</h3>
                    <div class="review-status">
                        <span class="review-status-badge pending">
                            <i class="fas fa-clock"></i> 待审核
                        </span>
                    </div>
                </div>
                <div class="card-body">
                    <div class="review-info">
                        <div class="review-info-item">
                            <div class="review-info-label">提交人</div>
                            <div class="review-info-value">张小明</div>
                        </div>
                        <div class="review-info-item">
                            <div class="review-info-label">提交时间</div>
                            <div class="review-info-value">2023-12-15 14:30</div>
                        </div>
                        <div class="review-info-item">
                            <div class="review-info-label">审核人</div>
                            <div class="review-info-value">李总监</div>
                        </div>
                        <div class="review-info-item">
                            <div class="review-info-label">预计完成时间</div>
                            <div class="review-info-value">2023-12-16 18:00</div>
                        </div>
                    </div>
                    
                    <div class="review-content">
                        <div class="review-content-title">
                            <i class="fas fa-tasks"></i> 批量处理内容
                        </div>
                        <div class="review-summary">
                            <div class="review-detail-item">
                                <div class="review-info-label">处理类型</div>
                                <div class="review-info-value">更新产品图片</div>
                            </div>
                            <div class="review-detail-item">
                                <div class="review-info-label">影响产品数</div>
                                <div class="review-info-value">126件</div>
                            </div>
                            <div class="review-detail-item">
                                <div class="review-info-label">预估处理时间</div>
                                <div class="review-info-value">约30分钟</div>
                            </div>
                        </div>
                        
                        <div class="feishu-status">
                            <i class="fas fa-paper-plane"></i> 已同步至飞书，等待审批
                        </div>
                    </div>
                    
                    <div class="review-comments">
                        <div class="review-comment">
                            <div class="comment-header">
                                <div class="comment-author">
                                    <div class="author-avatar">ZM</div>
                                    <div class="author-info">
                                        <div class="author-name">张小明</div>
                                        <div class="comment-date">2023-12-15 14:30</div>
                                    </div>
                                </div>
                            </div>
                            <p class="comment-content">所有产品图片已更新完毕，请审核通过后进行批量处理。</p>
                        </div>
                    </div>
                    
                    <div class="add-comment-form">
                        <textarea placeholder="添加审核意见..."></textarea>
                        <div style="display: flex; justify-content: flex-end; gap: 12px;">
                            <button class="btn btn-secondary">取消</button>
                            <button class="btn btn-primary">提交意见</button>
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    <button class="btn btn-secondary" data-action="reject">
                        <i class="fas fa-times"></i> 驳回
                    </button>
                    <button class="btn btn-primary" data-action="approve">
                        <i class="fas fa-check"></i> 通过
                    </button>
                </div>
            </div>
            
            <!-- 已通过审核的卡片示例 -->
            <div class="review-card">
                <div class="card-header">
                    <h3>批量更新产品价格 #PR-2023120002</h3>
                    <div class="review-status">
                        <span class="review-status-badge approved">
                            <i class="fas fa-check"></i> 已通过
                        </span>
                    </div>
                </div>
                <div class="card-body">
                    <div class="review-info">
                        <div class="review-info-item">
                            <div class="review-info-label">提交人</div>
                            <div class="review-info-value">李营销</div>
                        </div>
                        <div class="review-info-item">
                            <div class="review-info-label">提交时间</div>
                            <div class="review-info-value">2023-12-14 10:15</div>
                        </div>
                        <div class="review-info-item">
                            <div class="review-info-label">审核人</div>
                            <div class="review-info-value">王经理</div>
                        </div>
                        <div class="review-info-item">
                            <div class="review-info-label">审核完成时间</div>
                            <div class="review-info-value">2023-12-14 15:30</div>
                        </div>
                    </div>
                    
                    <div class="review-content">
                        <div class="review-content-title">
                            <i class="fas fa-tasks"></i> 批量处理内容
                        </div>
                        <div class="review-summary">
                            <div class="review-detail-item">
                                <div class="review-info-label">处理类型</div>
                                <div class="review-info-value">更新产品价格</div>
                            </div>
                            <div class="review-detail-item">
                                <div class="review-info-label">影响产品数</div>
                                <div class="review-info-value">57件</div>
                            </div>
                            <div class="review-detail-item">
                                <div class="review-info-label">预估处理时间</div>
                                <div class="review-info-value">约10分钟</div>
                            </div>
                        </div>
                        
                        <div class="feishu-status">
                            <i class="fas fa-check-circle"></i> 飞书审批已通过
                        </div>
                    </div>
                    
                    <div class="review-comments">
                        <div class="review-comment">
                            <div class="comment-header">
                                <div class="comment-author">
                                    <div class="author-avatar">LY</div>
                                    <div class="author-info">
                                        <div class="author-name">李营销</div>
                                        <div class="comment-date">2023-12-14 10:15</div>
                                    </div>
                                </div>
                            </div>
                            <p class="comment-content">根据最新市场策略，需要对57件产品进行价格调整，已上传价格表。</p>
                        </div>
                        <div class="review-comment">
                            <div class="comment-header">
                                <div class="comment-author">
                                    <div class="author-avatar">WJ</div>
                                    <div class="author-info">
                                        <div class="author-name">王经理</div>
                                        <div class="comment-date">2023-12-14 15:30</div>
                                    </div>
                                </div>
                            </div>
                            <p class="comment-content">价格调整方案已审核通过，系统将在今日晚间完成批量更新。</p>
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    <button class="btn btn-secondary" data-action="view-details">
                        <i class="fas fa-eye"></i> 查看详情
                    </button>
                    <button class="btn btn-secondary" data-action="duplicate">
                        <i class="fas fa-copy"></i> 复制
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 页面交互逻辑
        document.addEventListener('DOMContentLoaded', function() {
            // 导入项目按钮
            const importBtn = document.getElementById('importBtn');
            const importForm = document.getElementById('importForm');
            const cancelImport = document.getElementById('cancelImport');
            
            importBtn.addEventListener('click', function() {
                importForm.style.display = 'block';
            });
            
            cancelImport.addEventListener('click', function() {
                importForm.style.display = 'none';
            });
            
            // 新建批量项目按钮
            const newBatchBtn = document.getElementById('newBatchBtn');
            const batchActionCard = document.getElementById('batchActionCard');
            const closeActionCard = document.getElementById('closeActionCard');
            const cancelAction = document.getElementById('cancelAction');
            const confirmAction = document.getElementById('confirmAction');
            const actionTypes = document.querySelectorAll('.action-type');
            
            newBatchBtn.addEventListener('click', function() {
                batchActionCard.style.display = 'block';
            });
            
            closeActionCard.addEventListener('click', function() {
                batchActionCard.style.display = 'none';
                resetActionSelection();
            });
            
            cancelAction.addEventListener('click', function() {
                batchActionCard.style.display = 'none';
                resetActionSelection();
            });
            
            // 操作类型选择
            actionTypes.forEach(function(actionType) {
                actionType.addEventListener('click', function() {
                    // 移除所有选中状态
                    actionTypes.forEach(function(item) {
                        item.classList.remove('selected');
                    });
                    
                    // 添加当前选中状态
                    this.classList.add('selected');
                    
                    // 启用下一步按钮
                    confirmAction.disabled = false;
                });
            });
            
            // 重置操作类型选择
            function resetActionSelection() {
                actionTypes.forEach(function(item) {
                    item.classList.remove('selected');
                });
                confirmAction.disabled = true;
            }
            
            // 过滤器点击事件
            const filterItems = document.querySelectorAll('.filter-item');
            
            filterItems.forEach(function(item) {
                item.addEventListener('click', function() {
                    filterItems.forEach(function(filter) {
                        filter.classList.remove('active');
                    });
                    
                    this.classList.add('active');
                    // 这里应该添加过滤逻辑
                });
            });
        });

        // 延迟加载项目卡片，应用动画效果
        setTimeout(() => {
            const projectCards = document.querySelectorAll('.project-card');
            projectCards.forEach((card, index) => {
                setTimeout(() => {
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, 100 * index);
            });
        }, 300);
        
        // 处理项目选择功能
        const checkboxes = document.querySelectorAll('.project-selection-checkbox');
        const exportToolbar = document.getElementById('exportToolbar');
        const selectedCountEl = document.getElementById('selectedCount');
        const cancelSelectionBtn = document.getElementById('cancelSelection');
        const exportSelectedBtn = document.getElementById('exportSelected');
        const exportNotification = document.getElementById('exportNotification');
        
        // 更新选中项目数量和工具栏状态
        function updateSelection() {
            const selectedCheckboxes = document.querySelectorAll('.project-selection-checkbox:checked');
            const count = selectedCheckboxes.length;
            selectedCountEl.textContent = count;
            
            if (count > 0) {
                exportToolbar.classList.add('active');
            } else {
                exportToolbar.classList.remove('active');
            }
            
            return count;
        }
        
        // 为每个复选框添加事件监听
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateSelection);
        });
        
        // 取消选择按钮
        cancelSelectionBtn.addEventListener('click', () => {
            checkboxes.forEach(checkbox => {
                checkbox.checked = false;
            });
            updateSelection();
        });
        
        // 导出选中项目按钮
        exportSelectedBtn.addEventListener('click', () => {
            const selectedProjects = [];
            const projectCards = document.querySelectorAll('.project-card');
            
            projectCards.forEach(card => {
                const checkbox = card.querySelector('.project-selection-checkbox');
                if (checkbox.checked) {
                    selectedProjects.push({
                        id: card.dataset.projectId,
                        name: card.dataset.projectName,
                        imagesCount: card.dataset.imagesCount
                    });
                }
            });
            
            // 存储选中的项目到localStorage
            localStorage.setItem('exportProjects', JSON.stringify(selectedProjects));
            
            // 显示导出通知
            exportNotification.classList.add('active');
            
            // 2秒后跳转到导出页面
            setTimeout(() => {
                window.location.href = 'export.html';
            }, 1500);
        });

        // 版本历史功能
        const versionHistoryModal = document.getElementById('versionHistoryModal');
        const versionProjectName = document.getElementById('versionProjectName');
        const versionTimeline = document.getElementById('versionTimeline');
        const closeVersionModal = document.getElementById('closeVersionModal');
        const closeVersionModalBtn = document.getElementById('closeVersionModalBtn');
        const showVersionBtns = document.querySelectorAll('.show-versions-btn');

        // 模拟的版本历史数据
        const mockVersionHistory = {
            "1": [
                {
                    id: "v1.3",
                    timestamp: "2023-06-15T14:30:00",
                    status: "exported",
                    statusText: "已导出",
                    isCurrent: true,
                    changes: [
                        { type: "导出时间", value: "2023-06-15 14:30" },
                        { type: "导出格式", value: "JPG" },
                        { type: "图片质量", value: "90%" },
                        { type: "图片数量", value: "42" }
                    ],
                    changedFiles: [
                        { name: "product_01.jpg", status: "unchanged" },
                        { name: "product_02.jpg", status: "unchanged" },
                        { name: "product_03.jpg", status: "unchanged" }
                    ]
                },
                {
                    id: "v1.2",
                    timestamp: "2023-06-14T16:45:00",
                    status: "modified",
                    statusText: "已修改",
                    isCurrent: false,
                    changes: [
                        { type: "修改人", value: "设计团队" },
                        { type: "修改内容", value: "调整图片尺寸和质量参数" },
                        { type: "图片数量", value: "42" }
                    ],
                    changedFiles: [
                        { name: "product_01.jpg", status: "changed", details: "尺寸调整为1920x1080" },
                        { name: "product_02.jpg", status: "changed", details: "质量提升至90%" },
                        { name: "product_03.jpg", status: "unchanged" }
                    ]
                },
                {
                    id: "v1.1", 
                    timestamp: "2023-06-13T10:15:00",
                    status: "modified",
                    statusText: "已修改",
                    isCurrent: false,
                    changes: [
                        { type: "修改人", value: "运营团队" },
                        { type: "修改内容", value: "添加水印和产品标签" },
                        { type: "图片数量", value: "42" }
                    ],
                    changedFiles: [
                        { name: "product_01.jpg", status: "changed", details: "添加水印" },
                        { name: "product_02.jpg", status: "changed", details: "添加水印" },
                        { name: "product_03.jpg", status: "changed", details: "添加水印" }
                    ]
                },
                {
                    id: "v1.0",
                    timestamp: "2023-06-12T09:30:00",
                    status: "created",
                    statusText: "已创建",
                    isCurrent: false,
                    changes: [
                        { type: "创建人", value: "设计团队" },
                        { type: "创建内容", value: "初始批量项目创建" },
                        { type: "图片数量", value: "42" }
                    ],
                    changedFiles: [
                        { name: "product_01.jpg", status: "added" },
                        { name: "product_02.jpg", status: "added" },
                        { name: "product_03.jpg", status: "added" }
                    ]
                }
            ],
            "2": [
                {
                    id: "v1.0",
                    timestamp: "2023-06-14T10:30:00",
                    status: "created",
                    statusText: "已创建",
                    isCurrent: true,
                    changes: [
                        { type: "创建人", value: "市场部" },
                        { type: "创建内容", value: "初始批量项目创建" },
                        { type: "图片数量", value: "18" }
                    ],
                    changedFiles: [
                        { name: "summer_01.jpg", status: "added" },
                        { name: "summer_02.jpg", status: "added" },
                        { name: "summer_03.jpg", status: "added" }
                    ]
                }
            ],
            "3": [
                {
                    id: "v1.1",
                    timestamp: "2023-06-13T15:45:00",
                    status: "modified",
                    statusText: "已修改",
                    isCurrent: true,
                    changes: [
                        { type: "修改人", value: "产品团队" },
                        { type: "修改内容", value: "更新产品描述和标签" },
                        { type: "图片数量", value: "35" }
                    ],
                    changedFiles: [
                        { name: "newproduct_01.jpg", status: "changed", details: "更新描述" },
                        { name: "newproduct_02.jpg", status: "changed", details: "更新标签" }
                    ]
                },
                {
                    id: "v1.0",
                    timestamp: "2023-06-12T11:20:00",
                    status: "created",
                    statusText: "已创建",
                    isCurrent: false,
                    changes: [
                        { type: "创建人", value: "产品团队" },
                        { type: "创建内容", value: "初始批量项目创建" },
                        { type: "图片数量", value: "35" }
                    ],
                    changedFiles: [
                        { name: "newproduct_01.jpg", status: "added" },
                        { name: "newproduct_02.jpg", status: "added" }
                    ]
                }
            ]
        };

        // 显示版本历史模态窗口
        function showVersionHistory(projectId) {
            const projectName = document.querySelector(`.project-card[data-project-id="${projectId}"] h3`).textContent;
            const versions = mockVersionHistory[projectId] || [];
            
            versionProjectName.textContent = projectName;
            versionTimeline.innerHTML = '';
            
            // 生成版本历史时间线
            versions.forEach(version => {
                const versionDate = new Date(version.timestamp);
                const formattedDate = versionDate.toLocaleDateString('zh-CN', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                const formattedTime = versionDate.toLocaleTimeString('zh-CN', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const versionItem = document.createElement('div');
                versionItem.className = `version-item ${version.isCurrent ? 'current' : ''}`;
                
                versionItem.innerHTML = `
                    <div class="version-item-dot"></div>
                    <div class="version-item-header">
                        <div>
                            <div class="version-item-title">
                                ${version.id}
                                ${version.isCurrent ? '<span class="version-current-tag">当前版本</span>' : ''}
                                <span class="version-status ${version.status}">${version.statusText}</span>
                            </div>
                            <div class="version-item-time">
                                <i class="far fa-clock"></i> ${formattedDate} ${formattedTime}
                            </div>
                        </div>
                        <div class="version-item-actions">
                            ${!version.isCurrent ? `
                                <button class="version-compare-btn" data-version="${version.id}">
                                    <i class="fas fa-exchange-alt"></i> 对比
                                </button>
                                <button class="version-restore-btn" data-version="${version.id}">
                                    <i class="fas fa-undo"></i> 恢复此版本
                                </button>
                            ` : ''}
                        </div>
                    </div>
                    <div class="version-item-details">
                        ${version.changes.map(change => `
                            <div class="version-detail-row">
                                <div class="version-detail-label">${change.type}:</div>
                                <div class="version-detail-value">${change.value}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="version-compare-view" id="compare-${version.id}">
                        <table class="version-compare-table">
                            <thead>
                                <tr>
                                    <th>文件名</th>
                                    <th>变更状态</th>
                                    <th>详情</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${version.changedFiles.map(file => `
                                    <tr>
                                        <td>${file.name}</td>
                                        <td class="${file.status === 'added' ? 'version-added' : file.status === 'removed' ? 'version-removed' : file.status === 'changed' ? 'version-changed' : ''}">
                                            ${file.status === 'added' ? '新增' : file.status === 'removed' ? '删除' : file.status === 'changed' ? '修改' : '未变更'}
                                        </td>
                                        <td>${file.details || '-'}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
                
                versionTimeline.appendChild(versionItem);
            });
            
            // 为对比按钮添加事件监听
            document.querySelectorAll('.version-compare-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const versionId = this.getAttribute('data-version');
                    const compareView = document.getElementById(`compare-${versionId}`);
                    
                    if (compareView.classList.contains('active')) {
                        compareView.classList.remove('active');
                        this.innerHTML = '<i class="fas fa-exchange-alt"></i> 对比';
                    } else {
                        compareView.classList.add('active');
                        this.innerHTML = '<i class="fas fa-chevron-up"></i> 隐藏对比';
                    }
                });
            });
            
            // 为恢复按钮添加事件监听
            document.querySelectorAll('.version-restore-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const versionId = this.getAttribute('data-version');
                    
                    if (confirm(`确定要恢复到版本 ${versionId} 吗？这将替换当前版本。`)) {
                        // 显示恢复中的通知
                        showVersionNotification(`正在恢复到版本 ${versionId}...`, 'info');
                        
                        // 模拟恢复过程
                        setTimeout(() => {
                            showVersionNotification(`已成功恢复到版本 ${versionId}`, 'success');
                            
                            // 关闭模态窗口，应该在实际应用中进行页面刷新
                            setTimeout(() => {
                                versionHistoryModal.classList.remove('active');
                            }, 1500);
                        }, 1500);
                    }
                });
            });
            
            // 显示模态窗口
            versionHistoryModal.classList.add('active');
        }

        // 显示版本通知
        function showVersionNotification(message, type = 'info') {
            // 创建通知元素
            const notification = document.createElement('div');
            notification.className = `toast ${type}`;
            notification.innerHTML = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // 为显示版本历史按钮添加事件监听
        showVersionBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const projectId = this.getAttribute('data-project-id');
                showVersionHistory(projectId);
            });
        });

        // 关闭版本历史模态窗口
        closeVersionModal.addEventListener('click', () => {
            versionHistoryModal.classList.remove('active');
        });

        closeVersionModalBtn.addEventListener('click', () => {
            versionHistoryModal.classList.remove('active');
        });

        // 点击模态窗口外部关闭
        versionHistoryModal.addEventListener('click', (e) => {
            if (e.target === versionHistoryModal) {
                versionHistoryModal.classList.remove('active');
            }
        });

        // 审核管理相关JS
        document.addEventListener('DOMContentLoaded', function() {
            // 筛选逻辑
            const filterButtons = document.querySelectorAll('.review-section .filter-item');
            const reviewCards = document.querySelectorAll('.review-card');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // 移除所有激活状态
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    // 添加当前按钮激活状态
                    this.classList.add('active');
                    
                    const filterValue = this.getAttribute('data-filter');
                    
                    // 筛选审核卡片
                    reviewCards.forEach(card => {
                        const statusBadge = card.querySelector('.review-status-badge');
                        if (filterValue === 'all') {
                            card.style.display = 'block';
                        } else {
                            if (statusBadge.classList.contains(filterValue)) {
                                card.style.display = 'block';
                            } else {
                                card.style.display = 'none';
                            }
                        }
                    });
                });
            });
            
            // 同步飞书按钮功能
            const syncFeishuBtn = document.getElementById('sync-feishu');
            syncFeishuBtn.addEventListener('click', function() {
                // 模拟同步操作
                this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 同步中...';
                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-sync-alt"></i> 同步飞书审核';
                    showToast('飞书审核数据同步成功');
                }, 2000);
            });
            
            // 创建审核按钮功能
            const createReviewBtn = document.getElementById('create-review');
            createReviewBtn.addEventListener('click', function() {
                // 跳转到创建审核页面或显示创建审核弹窗
                showToast('功能开发中...');
            });
            
            // 审核通过按钮功能
            const approveButtons = document.querySelectorAll('[data-action="approve"]');
            approveButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const reviewCard = this.closest('.review-card');
                    const statusBadge = reviewCard.querySelector('.review-status-badge');
                    
                    statusBadge.className = 'review-status-badge approved';
                    statusBadge.innerHTML = '<i class="fas fa-check"></i> 已通过';
                    
                    const feishuStatus = reviewCard.querySelector('.feishu-status');
                    feishuStatus.innerHTML = '<i class="fas fa-check-circle"></i> 飞书审批已通过';
                    feishuStatus.style.backgroundColor = '#E3FFF1';
                    feishuStatus.style.borderColor = '#A6F4C5';
                    feishuStatus.style.color = '#18A957';
                    
                    // 更新卡片底部按钮
                    const cardFooter = reviewCard.querySelector('.card-footer');
                    cardFooter.innerHTML = `
                        <button class="btn btn-secondary" data-action="view-details">
                            <i class="fas fa-eye"></i> 查看详情
                        </button>
                        <button class="btn btn-secondary" data-action="duplicate">
                            <i class="fas fa-copy"></i> 复制
                        </button>
                    `;
                    
                    showToast('审核已通过，系统将开始执行批量处理');
                });
            });
            
            // 审核驳回按钮功能
            const rejectButtons = document.querySelectorAll('[data-action="reject"]');
            rejectButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const reviewCard = this.closest('.review-card');
                    const statusBadge = reviewCard.querySelector('.review-status-badge');
                    
                    statusBadge.className = 'review-status-badge rejected';
                    statusBadge.innerHTML = '<i class="fas fa-times"></i> 已驳回';
                    
                    const feishuStatus = reviewCard.querySelector('.feishu-status');
                    feishuStatus.innerHTML = '<i class="fas fa-times-circle"></i> 飞书审批已驳回';
                    feishuStatus.style.backgroundColor = '#FFE9E9';
                    feishuStatus.style.borderColor = '#FECDCA';
                    feishuStatus.style.color = '#D92D20';
                    
                    showToast('审核已驳回，请在意见中说明原因');
                });
            });
            
            // 添加评论表单功能
            const commentForms = document.querySelectorAll('.add-comment-form');
            commentForms.forEach(form => {
                const submitBtn = form.querySelector('.btn-primary');
                const cancelBtn = form.querySelector('.btn-secondary');
                const textarea = form.querySelector('textarea');
                
                submitBtn.addEventListener('click', function() {
                    const commentText = textarea.value.trim();
                    if (commentText) {
                        const commentsContainer = form.closest('.card-body').querySelector('.review-comments');
                        const now = new Date();
                        const formattedDate = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
                        
                        // 添加新评论
                        const newComment = document.createElement('div');
                        newComment.className = 'review-comment';
                        newComment.innerHTML = `
                            <div class="comment-header">
                                <div class="comment-author">
                                    <div class="author-avatar">YA</div>
                                    <div class="author-info">
                                        <div class="author-name">当前用户</div>
                                        <div class="comment-date">${formattedDate}</div>
                                    </div>
                                </div>
                            </div>
                            <p class="comment-content">${commentText}</p>
                        `;
                        
                        commentsContainer.appendChild(newComment);
                        textarea.value = '';
                        showToast('审核意见已添加');
                    } else {
                        showToast('请输入审核意见', 'error');
                    }
                });
                
                cancelBtn.addEventListener('click', function() {
                    textarea.value = '';
                });
            });
            
            // 提示信息功能
            function showToast(message, type = 'success') {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.innerHTML = message;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.classList.add('show');
                }, 10);
                
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        document.body.removeChild(toast);
                    }, 300);
                }, 3000);
            }
            
            // 添加toast样式
            const style = document.createElement('style');
            style.textContent = `
                .toast {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background-color: white;
                    border-radius: 10px;
                    padding: 12px 16px;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                    z-index: 1001;
                    transform: translateY(100%);
                    transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
                    border-left: 4px solid var(--dopamine-orange);
                }
                .toast.error {
                    border-left-color: #FF3B30;
                }
                .toast.show {
                    transform: translateY(0);
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html> 
